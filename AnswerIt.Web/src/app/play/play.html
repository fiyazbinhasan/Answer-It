@if (currentQuestion(); as question) {
  <section class="section">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-8-desktop is-10-tablet">

          <div class="box quiz-card">
            <!-- Progress -->
            <div class="mb-5">
              <div class="is-flex is-justify-content-space-between is-align-items-center mb-2">
                <span class="tag is-medium is-dark">
                  Question {{ currentQuestionIndex() + 1 }} / {{ questions().length }}
                </span>
                <span class="tag is-medium"
                  [class.is-danger]="timerValue() >= 4"
                  [class.is-warning]="timerValue() >= 2 && timerValue() < 4"
                  [class.is-success]="timerValue() < 2">
                  ‚è±Ô∏è {{ TIMER_MAX_VALUE - timerValue() }}s
                </span>
              </div>
              <progress class="progress is-small"
                [class.is-success]="timerValue() < 2"
                [class.is-warning]="timerValue() >= 2 && timerValue() < 4"
                [class.is-danger]="timerValue() >= 4"
                [value]="timerValue()"
                [max]="TIMER_MAX_VALUE">
              </progress>
            </div>

            <!-- Question -->
            <h2 class="title is-4 has-text-centered mb-5">{{ question.question }}</h2>

            <!-- Answers -->
            <div class="answers">
              @for (answer of question.answers; track answer.answer) {
                <button class="button is-fullwidth is-medium answer-btn mb-3"
                  [class.is-success]="(isTimerStopped() && answer.result) || (isRightAnswer() && answer.result)"
                  [class.is-danger]="isAnswered() && !isRightAnswer() && !answer.result && selectedAnswer() === answer"
                  (click)="giveAnswer(answer)"
                  [disabled]="isAnswered()">
                  {{ answer.answer }}
                </button>
              }
            </div>

            <!-- Result feedback -->
            @if (isAnswered()) {
              <div class="notification mt-4"
                [class.is-success]="isRightAnswer()"
                [class.is-danger]="!isRightAnswer()"
                [class.is-light]="true">
                <p class="has-text-centered has-text-weight-semibold">
                  @if (isRightAnswer()) {
                    üéâ Correct!
                  } @else {
                    üòû Wrong answer!
                  }
                </p>
              </div>
            }
            @if (isTimerStopped() && !isAnswered()) {
              <div class="notification is-warning is-light mt-4">
                <p class="has-text-centered has-text-weight-semibold">‚è∞ Time's up!</p>
              </div>
            }

            <!-- Navigation -->
            <div class="has-text-centered mt-5">
              @if (hasNext()) {
                <button class="button is-link is-medium" (click)="goNext()">
                  Next Question ‚Üí
                </button>
              }
              @if (gameOver()) {
                <button class="button is-primary is-medium" (click)="startAgain()">
                  üîÑ Play Again
                </button>
              }
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>
} @else {
  <section class="section">
    <div class="container has-text-centered">
      <div class="loader-wrapper">
        <div class="spinner"></div>
        <p class="mt-4 has-text-white is-size-5">Loading questions...</p>
      </div>
    </div>
  </section>
}
